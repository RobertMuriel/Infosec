# Escaneo a todos los puertos abiertos TCP(65536) con NMAP
sudo nmap -open -tcp -p- -sS -min-rate5000 -n -Pn xxx.xxx.xxx.xxx -oG allports

# Escaneo con scripts de reconocimiento de servicios en los puertos abiertos con NMAP
nmap -pp1,p2,p3,p4,p5 -sCV xxx.xxx.xxx.xxx -oN targeted

# Si esta corriendo el servicio de Samba - Puerto 445

	# Enumerar el servicio smb para conocer el nombre de la maquina y el dominio
	crackmapexec smb xxx.xxx.xxx.xxx 
	
	# Listar los recursos compartidos por samba con una sesion nula
	smbclient -L xxx.xxx.xxx.xxx -N

	# Si hay recursos compartidos 
	# Revisar que privilegios tenemos sobre los recursos
	smbmap -H xxx.xxx.xxx.xxx -u none
	
	# Si tenemos acceso a recursos compratidos SMB
	# Nos conectamos a revisar que archivos hay 
	smbclient //xxx.xxx.xxx.xxx/Recurso
	# Conectado al recurso SMB podemos manupular los archivos con los comandos
	ls - Listar a|rchivos
	get - Descargar archivo a nuestra maquina
	put - Subir archivo a la maquina victima

# Cuando tengamos acceso a archivos de configuracion simpre revisarlos para ver si hay credenciales en codigo duro
# Si tenemos acceo a archivos binarios usamos strings para imprimir las cadenas de caracteres imprimibles
strings archivo.exe
# Los binarios podemos especificar el numero de la cadena de caracteres y algunas veces se ve mejor la informacion
string -e l archivo.exe
# Para debugear y revisar como esta estructurado el codigo de un binario podemos usar dnSpy (Github dnSpy)
# Otra alternativa es doPeek (Github doPeek) 


# Si esta expuesto el servicio de Kerberos - Puerto 88

	# Se pueden enumerar cuentas del directorio activo por fuerza bruta con la herramienta Kerbrute (Github Kerbrute)
	kerbrute userenum -d dominio.com -dc xxx.xxx.xxx.xxx userlist
	# Se pueden enumerar cuentas desde un diccionario predefinido como los de seclist
	kerbrute userenum -d dominio.com -dc xxx.xxx.xxx.xxx /usr/share/SecLists/Usernames/xato-net-10-million-usernames.txt


# Teniendo credenciales validas podemos enumerar el directorio activo con la herramient RPCClient
rpcclient -U 'username%password' -c 'enumdomusers' --> Se conecta y ejecuta el comando para enumerar usuarios del dominio
rpcclient -U 'username%password' -->  Conectarse en modo interactivo
rpcclient $> enumdomusers  --> Enumerar Usuarios
rpcclient $> enumdomgroups --> Enumerar Grupos del Dominio

# Informacion de usarios del LDAP con ldapsearch
ldapsearch -x -H ldap://xxx.xxx.xxx.xxx -D 'username@dominio.com' -w 'Password' -b "DC=domino,DC=com"



○ Whatweb
○ Webalizer
○ Buscar subdominios
○ Buscar directorio
○ Buscar paneles de administración
○ Local File Inclusion
○ Verificar SQL Injection
○ Request analisis Burpsuite

